{% extends 'base.html' %}

{% block title %}Tracciamento Peso{% endblock %}

{% block content %}
<h2>Tracciamento del Peso</h2>

<form method="POST" class="row g-3 align-items-end mb-4">
  <div class="col-auto">
    <label for="peso" class="form-label">Peso (kg) per il {{ today.strftime('%d/%m/%Y') }}</label>
    <input type="number" step="0.1" min="30" max="300" class="form-control" name="peso" required>
    <input type="hidden" name="date" value="{{ today }}">
  </div>
  <div class="col-auto">
    <button type="submit" class="btn btn-primary">Salva</button>
  </div>
</form>

<form method="GET" class="row g-3 mb-4">
  <div class="col-md-2">
    <label class="form-label">Mese</label>
    <select name="mese" class="form-select">
      {% for num, nome in mesi %}
        <option value="{{ num }}" {% if num == selected_mese %}selected{% endif %}>{{ nome }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2">
    <label class="form-label">Anno</label>
    <select name="anno" class="form-select">
      {% for a in anni %}
        <option value="{{ a }}" {% if a == selected_anno %}selected{% endif %}>{{ a }}</option>
      {% endfor %}
    </select>
  </div>
  <div class="col-md-2 align-self-end">
    <button type="submit" class="btn btn-secondary">Filtra</button>
  </div>
</form>

<div class="card">
  <div class="card-body">
    <img src="data:image/png;base64,{{ chart }}" class="img-fluid" alt="Grafico Peso">
  </div>
</div>
{% endblock %}
